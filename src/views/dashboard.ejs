<%- include('partials/header') %>
	<!-- END #header -->
	<!-- BEGIN #sidebar -->
	<%- include('partials/sidebar') %>
		<!-- END #sidebar -->
		<!-- BEGIN #content -->
		<div id="content" class="app-content">
			<h1 class="page-header mb-3"> Hi, <%= admin.username %>. <small>here's what's happening with your dashboard
						today.</small>
			</h1>
			<!-- BEGIN row -->
			<div class="row">
				<!-- BEGIN col-6 -->
				<div class="col-xl-6 mb-3">
					<!-- BEGIN card -->
					<div class="card h-100 overflow-hidden">
						<!-- BEGIN card-img-overlay -->
						<div class="card-img-overlay d-block d-lg-none bg-blue rounded"></div>
						<!-- END card-img-overlay -->
						<!-- BEGIN card-img-overlay -->
						<div class="card-img-overlay d-none d-md-block bg-purple rounded mb-n1 mx-n1"
							style="background-image: url(assets/img/bg/wave-bg.png); background-position: right bottom; background-repeat: no-repeat; background-size: 100%;">
						</div>
						<!-- END card-img-overlay -->
						<!-- BEGIN card-img-overlay -->
						<div class="card-img-overlay d-none d-md-block bottom-0 top-auto">
							<div class="row">
								<div class="col-md-8 col-xl-6"></div>
								<div class="col-md-4 col-xl-6 mb-n2">
									<img src="assets/img/page/dashboard.svg" alt="" class="d-block ms-n3 mb-5"
										style="max-height: 310px">
								</div>
							</div>
						</div>
						<!-- END card-img-overlay -->
						<!-- BEGIN card-body -->
						<div class="card-body position-relative text-white text-opacity-70">
							<!-- BEGIN row -->
							<div class="row">
								<!-- BEGIN col-8 -->
								<div class="col-md-8">
									<!-- stat-top -->
									<div class="d-flex">
										<div class="me-auto">
											<h5 class="text-white text-opacity-80 mb-3">Total Earnings</h5>
											<h3 class="text-white mt-n1 mb-1">₦<%=
													totals.transactionsAmount.toLocaleString() %>
											</h3>
											<!-- <p class="mb-1 text-white text-opacity-60 text-truncate">
												<i class="fa fa-tool-tip"></i> <b>32%</b> increase compare to last week
											</p> -->
										</div>
									</div>
									<hr class="bg-white bg-opacity-75 mt-3 mb-3">
									<!-- stat-bottom -->
									<div class="row">
										<div class="col-4 col-lg-3">
											<div class="mt-1">
												<i class="fa fa-fw fa-book fs-28px text-black text-opacity-50"></i>
											</div>
											<div class="mt-1">
												<div>Bookings</div>
												<div class="fw-600 text-white">₦<%=
														totals.bookingsTransactionsAmount.toLocaleString() %>
												</div>
											</div>
										</div>
										<div class="col-4 col-lg-3">
											<div class="mt-1">
												<i
													class="fa fa-fw fa-graduation-cap fs-28px text-black text-opacity-50"></i>
											</div>
											<div class="mt-1">
												<div>Classes</div>
												<div class="fw-600 text-white">₦<%=
														totals.classesTransactionsAmount.toLocaleString() %>
												</div>
											</div>
										</div>
										<div class="col-4 col-lg-4">
											<div class="mt-1">
												<i class="fa fa-fw fa-retweet fs-28px text-black text-opacity-50"></i>
											</div>
											<div class="mt-1">
												<div>Refunds</div>
												<div class="fw-600 text-white">₦<%=
														totals.totalAmountRefunded.toLocaleString() %>
												</div>
											</div>
										</div>
									</div>
									<hr class="bg-white bg-opacity-75 mt-3 mb-3">
									<div class="mt-3 mb-2">
										<a href="https://dashboard.paystack.com/#/login?next=app.home.dashboard"
											class="btn btn-yellow btn-rounded btn-sm ps-5 pe-5 pt-2 pb-2 fs-14px fw-600"
											target="_blank"><i class="fa fa-wallet me-2 ms-n2"></i> Withdraw money</a>
									</div>
									<p class="fs-12px"> It usually takes 3-5 business days for<br> transferring the
										earning to your bank account. </p>
								</div>
								<!-- END col-8 -->
								<!-- BEGIN col-4 -->
								<div class="col-md-4 d-none d-md-block" style="min-height: 380px;"></div>
								<!-- END col-4 -->
							</div>
							<!-- END row -->
						</div>
						<!-- END card-body -->
					</div>
					<!-- END card -->
				</div>
				<!-- END col-6 -->
				<!-- BEGIN col-6 -->
				<div class="col-xl-6">
					<!-- BEGIN row -->
					<div class="row">
						<!-- BEGIN col-6 -->
						<div class="col-sm-6">
							<!-- BEGIN card -->
							<div class="card mb-3 overflow-hidden fs-13px border-0 bg-gradient-custom-orange"
								style="min-height: 199px;">
								<!-- BEGIN card-img-overlay -->
								<div class="card-img-overlay mb-n4 me-n4 d-flex" style="bottom: 0; top: auto;">
									<img src="assets/img/icon/order.svg" alt="" class="ms-auto d-block mb-n3"
										style="max-height: 105px">
								</div>
								<!-- END card-img-overlay -->
								<!-- BEGIN card-body -->
								<div class="card-body position-relative">
									<h5 class="text-white text-opacity-80 mb-3 fs-16px">Total Transactions</h5>
									<h3 class="text-white mt-n1">
										<%= totals.transactions %>
									</h3>
									<div class="progress bg-black bg-opacity-50 mb-2" style="height: 6px">
										<div class="progrss-bar progress-bar-striped bg-white" style="width: 100%">
										</div>
									</div>
									<div class="text-white text-opacity-80 mb-4"><i class="fa fa-wallet"></i> </div>
									<div><a href="/admin/manage-transactions/"
											class="text-white d-flex align-items-center text-decoration-none">View
											report <i
												class="fa fa-chevron-right ms-2 text-white text-opacity-50"></i></a>
									</div>
								</div>
								<!-- BEGIN card-body -->
							</div>
							<!-- END card -->
							<!-- BEGIN card -->
							<div class="card mb-3 overflow-hidden fs-13px border-0 bg-gradient-custom-teal"
								style="min-height: 199px;">
								<!-- BEGIN card-img-overlay -->
								<div class="card-img-overlay mb-n4 me-n4 d-flex" style="bottom: 0; top: auto;">
									<img src="assets/img/icon/visitor.svg" alt="" class="ms-auto d-block mb-n3"
										style="max-height: 105px">
								</div>
								<!-- END card-img-overlay -->
								<!-- BEGIN card-body -->
								<div class="card-body position-relative">
									<h5 class="text-white text-opacity-80 mb-3 fs-16px">Pending Refunds</h5>
									<h3 class="text-white mt-n1">
										<%= totals.refunds %>
									</h3>
									<div class="progress bg-black bg-opacity-50 mb-2" style="height: 6px">
										<div class="progrss-bar progress-bar-striped bg-white" style="width: 100%">
										</div>
									</div>
									<div class="text-white text-opacity-80 mb-4"><i class="fa fa-retweet"></i>
									</div>
									<div><a href="/admin/manage-refunds"
											class="text-white d-flex align-items-center text-decoration-none">View
											report <i
												class="fa fa-chevron-right ms-2 text-white text-opacity-50"></i></a>
									</div>
								</div>
								<!-- END card-body -->
							</div>
							<!-- END card -->
						</div>
						<!-- END col-6 -->
						<!-- BEGIN col-6 -->
						<div class="col-sm-6 ">
							<!-- BEGIN card -->
							<div class="card mb-3 flex-1 bg-purple">
								<!-- BEGIN card-body -->
								<div class="card-body">
									<div class="d-flex mb-3">
										<div class="flex-grow-1">
											<h5 class="mb-1">Total Users</h5>
											<div>Store user account registration</div>
										</div>
										<a href="javascript:;" class="text-secondary"><i class="fa fa-redo"></i></a>
									</div>
									<div class="d-flex">
										<div class="flex-grow-1">
											<h3 class="mb-1">
												<%= totals.users %>
											</h3>
										</div>
										<div
											class="w-50px h-50px bg-purple bg-opacity-20 rounded-circle d-flex align-items-center justify-content-center">
											<i class="fa fa-user fa-lg text-light"></i>
										</div>
									</div>
									<div class="progress bg-black bg-opacity-50 mb-2" style="height: 6px">
										<div class="progrss-bar progress-bar-striped bg-white" style="width: 100%">
										</div>
									</div>
									<div><a href="/admin/manage-users/"
											class="text-white d-flex align-items-center text-decoration-none">View
											report <i
												class="fa fa-chevron-right ms-2 text-white text-opacity-50"></i></a>
									</div>
								</div>
								<!-- END card-body -->
							</div>
							<!-- END card -->
							<!-- BEGIN card -->
							<div class="card">
								<!-- BEGIN card-body -->
								<div class="card-body">
									<div class="d-flex mb-3">
										<div class="flex-grow-1">
											<h5 class="mb-1">Total Bookings</h5>
											<div>Bookings stats overview</div>
										</div>
										<a href="javascript:;" class="text-secondary"><i class="fa fa-redo"></i></a>
									</div>
									<div class="d-flex">
										<div class="flex-grow-1">
											<h3 class="mb-1">
												<%= totals.bookings %>
											</h3>
										</div>
									</div>
									<!-- BEGIN row -->
									<div class="row">
										<!-- BEGIN col-6 -->
										<div class="col-6 text-center">
											<div
												class="w-50px h-50px bg-purple bg-opacity-20 rounded-circle d-flex align-items-center justify-content-center mb-2 ms-auto me-auto">
												<i class="fa fa-lock-open fa-lg text-purple"></i>
											</div>
											<div class="fw-600 text-body">
												<%= totals.bookingsPublic %>
											</div>
											<div class="fs-13px">Public</div>
										</div>
										<!-- END col-6 -->
										<!-- BEGIN col-6 -->
										<div class="col-6 text-center">
											<div
												class="w-50px h-50px bg-purple bg-opacity-20 rounded-circle d-flex align-items-center justify-content-center mb-2 ms-auto me-auto">
												<i class="fa fa-lock fa-lg text-purple"></i>
											</div>
											<div class="fw-600 text-body">
												<%= totals.bookingsPrivate %>
											</div>
											<div class="fs-13px">Private</div>
										</div>
										<!-- END col-6 -->
									</div>
									<!-- END row -->
								</div>
								<!-- END card-body -->
							</div>
							<!-- END card -->
						</div>
						<!-- BEGIN col-6 -->
					</div>
					<!-- END row -->
				</div>
				<!-- END col-6 -->
			</div>
			<!-- END row -->
			<!-- BEGIN row -->
			<!-- END row -->
			<!-- BEGIN row -->
			<div class="row">
				<!-- BEGIN col-6 -->
				<div class="col-xl-6 mb-3">
					<!-- BEGIN card -->
					<div class="card h-100">
						<!-- BEGIN card-body -->
						<div class="card-body">
							<div class="d-flex align-items-center mb-4">
								<div class="flex-grow-1">
									<h5 class="mb-1">Refunds</h5>
									<div class="fs-13px">Recent Pending Refunds</div>
								</div>
								<a href="/admin/manage-refunds" class="text-decoration-none">See All</a>
							</div>
							<% if (getPendingRefunds.length> 0) { %> <% getPendingRefunds.forEach((pendingRefund,
									index)=> { %> <!-- product-1 -->
									<div class="d-flex align-items-center mb-3">
										<div
											class="d-flex align-items-center justify-content-center me-3 w-50px h-50px bg-white p-3px rounded">
											<%= index + 1 %>
										</div>
										<div class="flex-grow-1">
											<div>
												<div class="text-body fw-600">
													<%= pendingRefund.user.first_name %>
														<%= pendingRefund.user.last_name %> (<%= pendingRefund.status %>
																)
												</div>
												<div class="fs-13px">
													<%= pendingRefund.reason %>
												</div>
											</div>
										</div>
										<div class="ps-3 text-center">
											<% if(pendingRefund.eligible==1){ %><button class="btn btn-sm btn-primary">
													Refund ₦<%= Number(pendingRefund.refund_amount).toLocaleString() %>
												</button>
												<% } %>
										</div>
									</div>
									<% }) %>
										<% } else { %>
											<Center>
												<br><br><br>
												<span>No Pending Refunds found.</span>
											</center>
											<% } %>
						</div>
						<!-- END card-body -->
					</div>
					<!-- END card -->
				</div>
				<!-- END col-6 -->
				<!-- BEGIN col-6 -->
				<div class="col-xl-6 mb-3">
					<!-- BEGIN card -->
					<div class="card h-100">
						<!-- BEGIN card-body -->
						<div class="card-body">
							<div class="d-flex align-items-center mb-2">
								<div class="flex-grow-1">
									<h5 class="mb-1">Bookings</h5>
									<div class="fs-13px">Recent Bookings</div>
								</div>
								<a href="/admin/manage-transactions" class="text-decoration-none">See All</a>
							</div>
							<!-- BEGIN table-responsive -->
							<div class="table-responsive mb-n2">
								<table class="table table-borderless mb-0">
									<thead>
										<tr class="text-body">
											<th class="ps-0">S/n</th>
											<th class="border-top-0 pt-0 pb-2">Booking Reference</th>
											<th class="border-top-0 pt-0 pb-2">Booked By</th>
											<th class="border-top-0 pt-0 pb-2">Court</th>
											<th class="border-top-0 pt-0 pb-2">Slot</th>
											<th class="border-top-0 pt-0 pb-2"> Status</th>
											<th class="border-top-0 pt-0 pb-2">Date Created</th>
										</tr>
									</thead>
									<tbody>
										<% if (getRecentBookings.length> 0) { %> <% getRecentBookings.forEach((booking,
												index)=> { %> <tr>
													<td class="w-10px align-middle">
														<%= index + 1 %>
													</td>
													<td class="align-middle">
														<%= booking.booking_reference %>
													</td>
													<td class="align-middle">
														<% if (booking.user_type==='User' && booking.user) { %>
															<%= booking.user.first_name %>
																<%= booking.user.last_name %>
																	<% } else if (booking.user_type==='System' &&
																		booking.admin) { %>
																		<%= 'System Admin' %>
																			<% } else { %> N/A <% } %>
													</td>
													<td>
														<%= booking.court.court_name %>
													</td>
													<!-- <td class="py-1 align-middle"><span
									                                                                        class="badge bg-teal text-teal-800 bg-opacity-25 px-2 pt-5px pb-5px rounded fs-12px d-inline-flex align-items-center"><i
									                                                                            class="fa fa-circle text-teal fs-9px fa-fw me-5px"></i>
									                                                                        <%= booking.gender ? booking.gender : "N/A" %>
									                                                                    </span>
									                                                                </td> -->
													<td class="align-middle"><span
															class="badge bg-gray-100 text-black text-opacity-50 px-2 pt-5px pb-5px rounded fs-12px d-inline-flex align-items-center">
															<%= booking.date %> | <%= booking.slot %>
														</span>
													</td>
													<td class="py-1 align-middle">
														<% const statusMap={ 'confirmed' : { bgClass: 'bg-success' ,
															textClass: 'text-success' , label: 'Confirmed'
															}, 'cancelled' : { bgClass: 'bg-danger' ,
															textClass: 'text-danger' , label: 'Cancelled' }, 'elapsed' :
															{ bgClass: 'bg-primary' , textClass: 'text-primary' ,
															label: 'Elapsed' }, 'pending' : { bgClass: 'bg-warning' ,
															textClass: 'text-warning' , label: 'Pending' } }; const
															status=statusMap[booking.status] || { bgClass: 'bg-light' ,
															textClass: 'text-muted' , label: 'Unknown' }; %>
															<span
																class="badge <%= status.bgClass %> text-dark bg-opacity-25 px-2 pt-5px pb-5px rounded fs-12px d-inline-flex align-items-center">
																<i
																	class="fa fa-circle <%= status.textClass %> fs-9px fa-fw me-5px"></i>
																<%= status.label %>
															</span>
													</td>
													<td class="align-middle">
														<%= new Date(booking.created_at).toLocaleString('en-GB', {
															day: 'numeric' , month: 'short' , year: 'numeric' ,
															hour: '2-digit' , minute: '2-digit' , hour12: true }) %>
													</td>
												</tr>
												<% }) %>
													<% } else { %>
														<tr>
															<td colspan="15">No bookings found.</td>
														</tr>
														<% } %>
									</tbody>
								</table>
							</div>
							<!-- END table-responsive -->
						</div>
						<!-- END card-body -->
					</div>
					<!-- END card -->
				</div>
				<!-- END col-6 -->
			</div>
			<!-- END row -->
		</div>
		<!-- END #content -->
		<!-- BEGIN btn-scroll-top -->
		<%- include('partials/footer') %>